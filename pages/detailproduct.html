<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hazelnut Latte Product Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com" rel="stylesheet" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "orange-custom": "#fb923c",
            },
          },
        },
      };
    </script>
  </head>
  <body>
    <header
      class="bg-[#0b0909] text-white flex items-center h-16 sticky top-0 z-[1000] px-4 md:px-10 lg:px-[150px]"
    >
      <!-- Logo -->
      <div class="flex items-center gap-2">
        <img src="/img/Frame.png" alt="Logo Icon" class="h-6" />
        <img
          src="/img/Logo.png"
          alt="Coffee Shop Logo Text"
          class="h-6 hidden sm:block"
        />
      </div>

      <!-- Navigasi utama -->
      <nav class="hidden md:flex flex-grow justify-center">
        <ul class="flex gap-6 list-none">
          <li><a href="" class="no-underline text-white">Home</a></li>
          <li><a href="" class="no-underline text-white">Product</a></li>
        </ul>
      </nav>

      <!-- Icon navigasi -->
      <nav class="ml-auto flex items-center">
        <ul class="flex gap-4 list-none">
          <li>
            <a href="">
              <img src="/img/Search.png" alt="Search Icon" class="w-5" />
            </a>
          </li>
          <li>
            <a href="">
              <img
                src="/img/ShoppingCart.png"
                alt="Shopping Cart Icon"
                class="w-5"
              />
            </a>
          </li>
        </ul>
      </nav>

      <!-- CTA -->
      <div class="hidden lg:flex items-center ml-6">
        <ul class="flex gap-4 list-none">
          <li>
            <a href="/pages/login.html" class="no-underline text-white"
              >Sign In</a
            >
          </li>
          <li>
            <a href="/pages/signUp.html" class="no-underline text-white"
              >Sign Up</a
            >
          </li>
        </ul>
      </div>
    </header>

    <div class="flex flex-col md:flex-row">
      <div class="md:w-1/2 p-4">
        <div
          class="bg-gray-300 h-80 rounded-lg flex items-center justify-center overflow-hidden"
        >
          <img id="productImage" class="w-full h-full object-cover" />
        </div>

        <div class="flex mt-4 space-x-3">
          <div
            class="bg-gray-300 h-20 w-20 rounded-lg cursor-pointer hover:shadow-md"
          ></div>
          <div
            class="bg-gray-300 h-20 w-20 rounded-lg cursor-pointer hover:shadow-md"
          ></div>
          <div
            class="bg-gray-300 h-20 w-20 rounded-lg cursor-pointer hover:shadow-md"
          ></div>
        </div>
      </div>

      <div class="md:w-1/2 p-6">
        <div class="flex justify-between items-center">
          <span
            class="bg-red-500 text-white text-xs font-semibold px-3 py-1 rounded-full uppercase"
            >Flash Sale!</span
          >
        </div>

        <h1
          id="productTitle"
          class="text-3xl font-bold mt-3 text-gray-800"
        ></h1>

        <div class="flex items-center mt-3">
          <span class="text-gray-400 line-through mr-3">IDR 20.000</span>
          <span
            id="productPrice"
            class="text-2xl font-bold text-orange-custom"
          ></span>
        </div>

        <div class="flex items-center mt-3 text-sm">
          <div class="text-yellow-400">★★★★★</div>
          <span class="ml-2 text-gray-600">5.0</span>
          <span class="ml-4 text-blue-500 cursor-pointer">200+ Review</span>
          <span class="ml-4 text-blue-500 cursor-pointer">Recommendation</span>
        </div>

        <p id="productDescription" class="mt-4 text-gray-500 text-sm"></p>

        <div class="flex items-center mt-4">
          <button
            id="minusQty"
            class="bg-gray-200 text-gray-700 px-3 py-1 rounded-l"
          >
            -
          </button>
          <input
            id="qtyInput"
            type="text"
            value="1"
            class="w-10 text-center border-t border-b border-gray-200"
          />
          <button
            id="plusQty"
            class="bg-gray-200 text-gray-700 px-3 py-1 rounded-r"
          >
            +
          </button>
        </div>

        <h2 class="mt-4 font-semibold text-gray-700">Choose Size</h2>
        <div class="flex mt-2 space-x-3">
          <button
            class="border border-orange-custom text-orange-custom px-4 py-2 rounded-lg text-sm"
          >
            Regular
          </button>
          <button
            class="border border-gray-300 text-gray-500 px-4 py-2 rounded-lg text-sm"
          >
            Medium
          </button>
          <button
            class="border border-gray-300 text-gray-500 px-4 py-2 rounded-lg text-sm"
          >
            Large
          </button>
        </div>

        <h2 class="mt-4 font-semibold text-gray-700">Hot/Ice?</h2>
        <div class="flex mt-2 space-x-3">
          <button
            class="temp-btn border border-orange-custom text-orange-custom px-4 py-2 rounded-lg text-sm w-1/2"
            data-temp="Ice"
          >
            Ice
          </button>
          <button
            class="temp-btn border border-gray-300 text-gray-500 px-4 py-2 rounded-lg text-sm w-1/2"
            data-temp="Hot"
          >
            Hot
          </button>
        </div>

        <div class="flex mt-6 space-x-3">
          <button
            id="buyNow"
            class="bg-orange-custom text-white font-bold py-3 px-6 rounded-lg flex-grow"
          >
            Buy
          </button>

          <button
            id="addToCart"
            class="border border-orange-custom text-orange-custom font-bold py-3 px-6 rounded-lg flex-grow flex items-center justify-center"
          >
            add to cart
          </button>
        </div>
      </div>
    </div>

    <script>
      let selectedSize = "Regular";
      let selectedTemp = "Ice";
      let qty = 1;
      let currentProduct = null;

      async function loadProductDetail() {
        const id = new URLSearchParams(window.location.search).get("id");

        const res = await fetch(
          "https://raw.githubusercontent.com/askadiliya/koda-b6-html/refs/heads/main/data/data.json",
        );
        const data = await res.json();

        currentProduct = data.flashSaleProducts.find((p) => p.id == id);

        if (!currentProduct) return;

        document.getElementById("productImage").src = currentProduct.image;
        document.getElementById("productTitle").innerText =
          currentProduct.title;
        document.getElementById("productPrice").innerText =
          currentProduct.price;
        document.getElementById("productDescription").innerText =
          currentProduct.description;
      }

      document.getElementById("plusQty").onclick = () => {
        qty++;
        document.getElementById("qtyInput").value = qty;
      };

      document.getElementById("minusQty").onclick = () => {
        if (qty > 1) qty--;
        document.getElementById("qtyInput").value = qty;
      };

      document.querySelectorAll(".size-btn").forEach((btn) => {
        btn.onclick = () => {
          document.querySelectorAll(".size-btn").forEach((b) => {
            b.classList.remove("border-orange-custom", "text-orange-custom");
            b.classList.add("border-gray-300", "text-gray-500");
          });
          btn.classList.add("border-orange-custom", "text-orange-custom");
          selectedSize = btn.dataset.size;
        };
      });

      document.querySelectorAll(".temp-btn").forEach((btn) => {
        btn.onclick = () => {
          document.querySelectorAll(".temp-btn").forEach((b) => {
            b.classList.remove("border-orange-custom", "text-orange-custom");
            b.classList.add("border-gray-300", "text-gray-500");
          });
          btn.classList.add("border-orange-custom", "text-orange-custom");
          selectedTemp = btn.dataset.temp;
        };
      });

      function buildOrderData() {
        return {
          id: currentProduct.id,
          title: currentProduct.title,
          image: currentProduct.image,
          price: currentProduct.price,
          qty,
          size: selectedSize,
          temperature: selectedTemp,
        };
      }

      document.getElementById("buyNow").onclick = () => {
        localStorage.setItem("payment", JSON.stringify(buildOrderData()));
        window.location.href = "payment.html";
      };

      document.getElementById("addToCart").onclick = () => {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.push(buildOrderData());
        localStorage.setItem("cart", JSON.stringify(cart));
        window.location.href = "history.html";
      };
      
      loadProductDetail();
    </script>
  </body>
</html>
